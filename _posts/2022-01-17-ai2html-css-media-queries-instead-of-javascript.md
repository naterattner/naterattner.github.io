---
layout: post
title: Responsive graphics with ai2html and CSS media queries (instead of JavaScript)
subtitle: An alternative for when the documentation's resizer script doesn’t play nicely with your website
cover-img: 
thumbnail-img: 
share-img: 
tags: 
comments: false
---

[ai2html](http://ai2html.org/){:target="_blank"} is an open-source script for Adobe Illustrator built by the New York Times that turns Illustrator documents into HTML and CSS files for the web. When I started using it for stories, I found it fairly straightforward to run, but was stumped when what appeared to be working locally fell apart once uploaded through my site's content management system. 

It turns out that the NYT’s suggested JavaScript approach for serving separate graphics on different screen sizes conflicted with some code built into my site’s page templates. As a workaround, below is an alternative method using CSS media queries. There may be more robust solutions, such as working with a product team to edit the conflicting code, but this could be a useful alternative to what's in the official documentation for those on a deadline.

Quick description of ai2html: The script works its magic by separating the text in an Illustrator file from background images or shapes (such as the bars on a chart, or base of a map). It then produces an HTML file with this text overlaid on the background images. ai2html can be used to make responsive web graphics by building multiple versions in separate artboards (sized for mobile, tablet, and desktop, for example) within an Illustrator file. ai2html will export these as separate divs.

It’s used by many newsrooms including the [Times](https://www.nytimes.com/interactive/2021/12/07/business/omicron-stock-market-covid.html){:target="_blank"}, [The Washington Post](https://www.washingtonpost.com/health/interactive/2022/omicron-comparison-cases-deaths-hospitalizations/){:target="_blank"}, and the [Wall Street Journal](https://www.wsj.com/articles/cloth-face-mask-omicron-11640984082){:target="_blank"}. Here's a recent personal example from [CNBC](https://www.cnbc.com/2021/12/09/covid-relief-bills-us-has-spent-most-of-coronavirus-aid-money.html){:target="_blank"}. Jonathan Soma has a [great tutorial](https://www.youtube.com/watch?v=6YkL6TCyxws){:target="_blank"} on how to use the tool, as does [Luis Melgar on Alberto Cairo’s site](http://www.thefunctionalart.com/p/instructors-guide.html){:target="_blank"}. 

Once a graphic is built in Illustrator and exported with the ai2html script, the Times’s documentation suggests using some JavaScript code to serve different graphics sizes at different browser widths:

>The idea is that each artboard/div can be toggled on and off depending on the size of the outer container. All you have to do is add our little [resizer script](https://github.com/newsdev/ai2html/blob/gh-pages/_includes/resizer-script.html){:target="_blank"} to your webpage.

Using the script is easy – just copy and paste it into the top of the produced ai2html file. But because a code conflict that I couldn't control was breaking the resizer script, all three sizes of a graphic were showing up in my first attempt at this, resulting in a chart monstrosity along these lines:

![Mobile, tablet, and desktop images all shown at once](/assets/img/posts/2022-01-17/three_images_stacked.png){: .mx-auto.d-block :}

If that’s happening to you and there’s no time to work out a long-term solution, here’s a way to show and hide the artboards using CSS instead of JavaScript. The IDs ```#g-ai2html-example-mobile```, ```#g-ai2html-example-tablet```, and ```#g-ai2html-example-desktop``` match the ```<div>``` IDs that ai2html makes from the Illustrator document and artboard names when creating the HTML file:

```css
#g-ai2html-example-mobile {
	display: block; /*Show the mobile version by default*/
}

#g-ai2html-example-tablet, #g-ai2html-example-desktop {
	display: none; /*Hide the tablet and desktop versions*/
}

@media (min-width: 700px) {
	#g-ai2html-example-tablet {
		display: block; /*Show tablet version once screen width hits 700px*/
	}

	#g-ai2html-example-mobile, #g-ai2html-example-desktop {
		display: none; /*Hide the mobile and desktop versions*/
	}
}

@media (min-width: 1000px) {
	#g-ai2html-example-desktop {
		display: block; /*Show desktop version once screen width hits 1000px*/
	}

	#g-ai2html-example-mobile, #g-ai2html-example-tablet {
		display: none; /*Hide the mobile and tablet versions*/
	}            
}
```

Plugging this block of code in at the end of the ai2html file’s CSS ```<style>``` tags produces a graphic that displays different versions based on the widths specified in the media queries. Here's an example (resize your browser window to test it out):

<!-- Generated by ai2html v0.102.0 - 2022-01-16 14:44 -->
<!-- ai file: ai2html-example.ai -->
<style media="screen,print">
	#g-ai2html-example-box ,
	#g-ai2html-example-box .g-artboard {
		margin:0 auto;
	}
	#g-ai2html-example-box p {
		margin:0;
	}
	#g-ai2html-example-box .g-aiAbs {
		position:absolute;
	}
	#g-ai2html-example-box .g-aiImg {
		position:absolute;
		top:0;
		display:block;
		width:100% !important;
	}
	#g-ai2html-example-box .g-aiSymbol {
		position: absolute;
		box-sizing: border-box;
	}
	#g-ai2html-example-box .g-aiPointText p { white-space: nowrap; }
	#g-ai2html-example-mobile {
		position:relative;
		overflow:hidden;
	}
	#g-ai2html-example-mobile p {
		font-family:arial,helvetica,sans-serif;
		line-height:66px;
		filter:alpha(opacity=100);
		-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
		opacity:1;
		letter-spacing:0em;
		font-size:55px;
		text-align:left;
		color:rgb(255,255,255);
		text-transform:none;
		padding-bottom:0;
		padding-top:0;
		mix-blend-mode:normal;
		font-style:normal;
		height:auto;
		position:static;
	}
	#g-ai2html-example-mobile .g-pstyle0 {
		text-align:center;
	}
	#g-ai2html-example-tablet {
		position:relative;
		overflow:hidden;
	}
	#g-ai2html-example-tablet p {
		font-family:arial,helvetica,sans-serif;
		line-height:66px;
		filter:alpha(opacity=100);
		-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
		opacity:1;
		letter-spacing:0em;
		font-size:55px;
		text-align:left;
		color:rgb(255,255,255);
		text-transform:none;
		padding-bottom:0;
		padding-top:0;
		mix-blend-mode:normal;
		font-style:normal;
		height:auto;
		position:static;
	}
	#g-ai2html-example-tablet .g-pstyle0 {
		text-align:center;
	}
	#g-ai2html-example-desktop {
		position:relative;
		overflow:hidden;
	}
	#g-ai2html-example-desktop p {
		font-family:arial,helvetica,sans-serif;
		line-height:66px;
		filter:alpha(opacity=100);
		-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);
		opacity:1;
		letter-spacing:0em;
		font-size:55px;
		text-align:left;
		color:rgb(255,255,255);
		text-transform:none;
		padding-bottom:0;
		padding-top:0;
		mix-blend-mode:normal;
		font-style:normal;
		height:auto;
		position:static;
	}
	#g-ai2html-example-desktop .g-pstyle0 {
		text-align:center;
	}

	/* Custom CSS */
	/*CSS media queries to show different content at different screen widths*/
	#g-ai2html-example-mobile {
    	display: block; /*Show the mobile version by default*/
  	}
  	#g-ai2html-example-tablet, #g-ai2html-example-desktop {
    	display: none; /*Hide the tablet and desktop versions*/
  	}
  	@media (min-width: 700px) {
    	#g-ai2html-example-tablet {
    		display: block; /*Show the tablet version once screen width hits 700px*/
  		}
    	#g-ai2html-example-mobile, #g-ai2html-example-desktop {
      		display: none; /*Hide the mobile and desktop versions*/
    	}
  	}
	@media (min-width: 1000px) {
		#g-ai2html-example-desktop {
      		display: block; /*Show the desktop version once screen width hits 1000px*/
    	}
    	#g-ai2html-example-mobile, #g-ai2html-example-tablet {
      		display: none; /*Hide the mobile and tablet versions*/
    	}    	
  	}
  	/*End CSS media queries*/

</style>

<div id="g-ai2html-example-box" class="ai2html">

<!-- Artboard: mobile -->
<div id="g-ai2html-example-mobile" class="g-artboard" style="max-width: 318px;max-height: 535px" data-aspect-ratio="0.594" data-min-width="0" data-max-width="519">
<div style="padding: 0 0 168.3476% 0;"></div>
		<img id="g-ai2html-example-mobile-img" class="g-aiImg" alt="" src="/assets/img/posts/2022-01-17/ai2html-example-mobile.png"/>
		<div id="g-ai0-1" class="g-ai2html-settings g-aiAbs" style="top:44.8309%;left:49.9469%;margin-left:-33.0189%;width:66.0377%;">
			<p class="g-pstyle0">MOBILE</p>
		</div>
	</div>

<!-- Artboard: tablet -->
<div id="g-ai2html-example-tablet" class="g-artboard" style="width:520px; height:397.765753679212px;" data-aspect-ratio="1.307" data-min-width="520" data-max-width="629">
<div style=""></div>
		<img id="g-ai2html-example-tablet-img" class="g-aiImg" alt="" src="/assets/img/posts/2022-01-17/ai2html-example-tablet.png"/>
		<div id="g-ai1-1" class="g-ai2html-settings g-aiAbs" style="top:42.9901%;left:49.9985%;margin-left:-20.0962%;width:40.1923%;">
			<p class="g-pstyle0">TABLET</p>
		</div>
	</div>

<!-- Artboard: desktop -->
<div id="g-ai2html-example-desktop" class="g-artboard" style="width:630px; height:293.214565969573px;" data-aspect-ratio="2.149" data-min-width="630">
<div style=""></div>
		<img id="g-ai2html-example-desktop-img" class="g-aiImg" alt="" src="/assets/img/posts/2022-01-17/ai2html-example-desktop.png"/>
		<div id="g-ai2-1" class="g-ai2html-settings g-aiAbs" style="top:40.2436%;left:50.0117%;margin-left:-21.1905%;width:42.381%;">
			<p class="g-pstyle0">DESKTOP</p>
		</div>
	</div>

</div>

<!-- End ai2html - 2022-01-16 14:44 -->

To go one step further and make this more efficient, ai2html lets you specify custom CSS that you always want to include in the HTML file it produces. By pasting the above media queries into a text box in the Illustrator file with "ai2html-css" at the top, the code will automatically be included in the file’s ```<style>``` tags. Just update the IDs to match your Illustrator file and artboard names as needed.

Here’s the Illustrator file and code for the the graphic example above: [https://github.com/naterattner/ai2html-with-css-media-queries](https://github.com/naterattner/ai2html-with-css-media-queries){:target="_blank"}.